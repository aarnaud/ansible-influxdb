---
# Default variables
# =================

# .. contents:: Sections
#    :local:
#
# ----------------------------------
#   Users and databases to create
# ----------------------------------


# .. envvar:: influxdb__users
#
# List of users to create. Supported attibutes:
# - user (required) - name of the user
# - password (optional) - password of the user, will be generated by default
influxdb__users: []


# .. envvar:: influxdb__databases
#
# List of databases to create. Supported attributes:
# - database (requered) - name of the database        
influxdb__databases: []        


# ----------------------------------
#   Server and admin user
# ----------------------------------


# .. envvar:: influxdb__server
#
# FQDN hostname of the remote InfluxDB server to use. Role detects if a local
# server is available and uses it automatically.
influxdb__server: '{{ ansible_local.influxdb.server
                     if (ansible_local|d() and ansible_local.influxdb|d() and
                         ansible_local.influxdb.server|d() and
                         ansible_local.influxdb.server != "localhost")
                     else ansible_fqdn }}'

# .. envvar:: influxdb__delegate_to
#
# FQDN hostname of the host that will execute Ansible tasks related to the
# InfluxDB database and role management. If InfluxDB server is available
# locally, host will delegate the tasks to itself automatically.
influxdb__delegate_to: '{{ influxdb__server
                          if (influxdb__server|d() and
                             (influxdb__server != "localhost" or not influxdb__server))
                          else ansible_fqdn }}'


# .. envvar:: influxdb__admin
#
# Admin username on the InfluxDB server. Role detects if a local server
# is available and uses it's admin username automatically.
influxdb__admin: '{{ ansible_local.influxdb.admin
                    if (ansible_local|d() and ansible_local.influxdb|d() and
                        ansible_local.influxdb.admin|d())
                    else "admin" }}'


# .. envvar:: influxdb__admin_password
#
# Password of the admin user
influxdb__admin_password: "{{ lookup('password', secret + '/credentials/' + influxdb__delegate_to + '/influxdb/' + influxdb__admin + '/password length=20') }}"


# .. envvar:: influxdb__query_url
#
# Query URL for InfluxDB        
# FIXME:  detect proto and port
influxdb__query_url: "https://{{ influxdb__server }}:8086/query"

