---
# Default variables
# =================

# .. contents:: Sections
#    :local:
#
# ----------------------------------
#   Users and databases to create
# ----------------------------------


# .. envvar:: influxdb_users
#
# List of users to create. Supported attibutes:
# - user (required) - name of the user
# - password (optional) - password of the user, will be generated by default
influxdb_users: []


# .. envvar:: influxdb_databases
#
# List of databases to create. Supported attributes:
# - database (requered) - name of the database        
influxdb_databases: []        


# ----------------------------------
#   Server and admin user
# ----------------------------------


# .. envvar:: influxdb_server
#
# FQDN hostname of the remote InfluxDB server to use. Role detects if a local
# server is available and uses it automatically.
influxdb_server: '{{ ansible_local.influxdb.server
                     if (ansible_local|d() and ansible_local.influxdb|d() and
                         ansible_local.influxdb.server|d() and
                         ansible_local.influxdb.server != "localhost")
                     else ansible_fqdn }}'

# .. envvar:: influxdb_delegate_to
#
# FQDN hostname of the host that will execute Ansible tasks related to the
# InfluxDB database and role management. If InfluxDB server is available
# locally, host will delegate the tasks to itself automatically.
influxdb_delegate_to: '{{ influxdb_server
                          if (influxdb_server|d() and
                             (influxdb_server != "localhost" or not influxdb_server))
                          else ansible_fqdn }}'


# .. envvar:: influxdb_admin
#
# Admin username on the InfluxDB server. Role detects if a local server
# is available and uses it's admin username automatically.
influxdb_admin: '{{ ansible_local.influxdb.admin
                    if (ansible_local|d() and ansible_local.influxdb|d() and
                        ansible_local.influxdb.admin|d())
                    else "admin" }}'


# .. envvar:: influxdb_admin_password
#
# Password of the admin user
influxdb_admin_password: "{{ lookup('password', secret + '/credentials/' + influxdb_delegate_to + '/influxdb/' + influxdb_admin + '/password length=20') }}"


# .. envvar:: influxdb_query_url
#
# Query URL for InfluxDB        
# FIXME:  detect proto and port
influxdb_query_url: "https://{{ influxdb_server }}:8086/query"

